<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-COMPATIBLE" content="IE=edge,chrome=1">

    <title>Xoundboy.com admin panel</title>
    <meta name="viewport" content="width=device-width">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css' />

    <style>
        html, body {
            height: 100%;
        }
        #loading {
            font-family: "Helvetica Neue Light", "HelveticaNeue-Light", "Helvetica Neue", Calibri, Helvetica, Arial, sans-serif;
            font-size: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
        }
    </style>

</head>
<body>
    <div id="loading">Loading...</div>
    <div id="notificationContainer"></div>
    <div id="page"></div>
    <script src="/assets/js/shared.js" charset="utf-8"></script>
    <script src="/assets/js/backend.js" charset="utf-8"></script>
</body>
</html>

<script type="text/template" id="template_notification">
    <div id="notificationInner" class="{{type}}">
        <p>{{{message}}}</p>
    </div>
</script>

<script type="text/template" id="template_dashboard">
    <nav>
        <button class="goBack">Back</button>
        <button class="goForward">Forward</button>
        <a href="#recordings" id="navRecordings">Recordings</a>
        <a href="#artists" id="navArtists">Artists</a>
        <a href="#playlists" id="navPlaylists">Playlists</a>
    </nav>
    <div id="mainContent">
        <div id="audioUploadContainer"></div>
    </div>
</script>

<script type="text/template" id="template_audioUpload">
    {{#step1}}
    <div id="step1" class="steps">
        <h2>Step 1: Upload Audio File</h2>
        <p>
            <input type="file" size="60" name="uploadFile" id="uploadFile" accept=".mp3" />
        </p>
    </div>
    {{/step1}}
    {{#step2}}
    <div id="step2" class="steps">
        <h2>Step 2: Preview Upload</h2>
        <p>Check that the file uploaded correctly by playing it.</p>
        <audio id="uploadedFile" controls>
            <source src="/uploads/{{tempName}}.mp3" type="audio/mpeg">
        </audio>
        <p class="small">File size: {{size}} bytes</p>
        <p class="buttons">
            <button id="step2BackBtn" class="backBtn">Upload again</button>
            <button id="step2NextBtn" class="nextBtn">Plays fine</button>
        </p>
    </div>
    {{/step2}}
    {{#step3}}
    <div id="step3" class="steps">
        <h2>Step 3: Provide Info</h2>
        <p>Now enter some details about the recording so that it can be saved permanently</p>
        <form id="newRecordingInfo">
            <div class="newRecordingInfoFormContainer"></div>
            <p class="buttons">
                <button id="step3BackBtn">Back</button>
                <button id="step3NextBtn">Next</button>
            </p>
        </form>
    </div>
    {{/step3}}
    {{#step4}}
    <div id="step4" class="steps">
        <h2>Step 4: Confirmation</h2>
        <p>Title: <strong>{{{title}}}</strong></p>
        <p>Artist: <strong>{{{actName}}}</strong></p>
        <p>Tags: <strong>{{{tags}}}</strong></p>
        <p>Location: <strong>{{{recLocation}}}</strong></p>
        <p>Date: <strong>{{recDate}}</strong></p>
        <p>Notes: <strong>{{{recNotes}}}</strong></p>
        <p>Duration: <strong>{{duration}}</strong></p>
        <p>Size: <strong>{{size}} bytes</strong></p>
        <p class="buttons">
            <button id="step4BackBtn" class="backBtn">Back</button>
            <button id="step4NextBtn">Confirm</button>
        </p>
    </div>
    {{/step4}}
</script>

<script type="text/template" id="template_recordings">

    <div class="buttonBar">
        <button class="addRecordingButton cta">Upload recording</button>
    </div>

    <table id="recordings_table" class="benGrid">
        <thead>
        <tr>
            <td class="buttonColumn"></td>
            <th bengrid-key="audioFile">Title</th>
            <th bengrid-key="actName">Artist</th>
            <th bengrid-key="actName">Duration</th>
            <td class="buttonColumn"></td>
            <td class="buttonColumn"></td>
        </tr>
        </thead>
        <tbody>
        {{#recordings}}
        <tr id="recordingId-{{id}}" class="recordingRow" data-recordingid="{{id}}">
            <td><button class="previewButton" data-filename="{{audioFile}}.mp3">preview</button></td>
            <td>{{{title}}}</td>
            <td data-artistid="{{actID}}">{{{actName}}}</td>
            <td class="rightAlign">{{duration}}</td>
            <td><button class="editRecordingButton">edit</button></td>
            <td><button class="deleteRecordingButton">delete</button></td>
        </tr>
        {{/recordings}}
        {{^recordings}}
            <tr>
                <td colspan="5" class="emptyTable">No recordings yet
                    <a href="#audioUpload" class="link">Upload one now</a> </td>
            </tr>
        {{/recordings}}
        </tbody>
    </table>
</script>

<script type="text/template" id="template_recordingAddEdit" >


    {{#tempName}}
        <!-- when form content used for audioUpload -->
        <input type="hidden" name="audioFile" value="{{tempName}}" />
    {{/tempName}}


    {{^tempName}}
        <!-- when form content used for recording edit panel -->
        <h2>Edit Recording Details</h2>
        <input type="hidden" name="audioFile" value="{{audioFile}}" />
    {{/tempName}}

    <input type="hidden" name="size" value="{{size}}" />
    <p>
        <label for="title">Title</label>
        <input type="text" name="title" id="title" maxlength="50" value="{{{title}}}" required />
    </p>
    <p>
        <label for="actID">Artist</label>

        <select name="actID" id="actID" required>
            <option value="">Select an artist</option>
            {{#artistOptions}}
                <option value="{{id}}">{{{actName}}}</option>
            {{/artistOptions}}
            <option value="new">Add a new artist</option>
        </select>

    </p>
    <p>
        <label for="tags">Tags (csv)</label>
        <input type="text" name="tags" id="tags" maxlength="254" value="{{{tags}}}" />
    </p>
    <p>
        <label for="recLocation">Location</label>
        <input type="text" name="recLocation" id="recLocation" maxlength="254" value="{{{recLocation}}}" required />
    </p>
    <p>
        <label for="recDate">Date</label>
        <input class="datepicker" type="text" name="recDate" id="recDate" value="{{recDate}}" required />
    </p>
    <p>
        <label for="recNotes">Notes</label>
        <textarea name="recNotes" id="recNotes">{{{recNotes}}}</textarea>
    </p>


</script>

<script type="text/template" id="template_recordingEditPanel">
    <form id="recordingInfo">
        <div class="recordingInfoFormContainer"></div>
        <p class="buttons">
            <button id="cancelEditButton">Cancel</button>
            <button id="updateRecordingButton">Update</button>
        </p>
    </form>
</script>

<script type="text/template" id="template_artists">

    <div class="buttonBar">
        <button class="addArtistButton cta">Add artist</button>
    </div>
    <table id="artists_table" class="benGrid">
        <thead>
        <tr>
            <td></td>
            <th bengrid-key="actName">Artist</th>
            <td class="buttonColumn"></td>
            <td class="buttonColumn"></td>
        </tr>
        </thead>
        <tbody>
        {{#artists}}
        <tr id="actID-{{id}}" class="artistRow" data-actid="{{id}}">
            <td><div class="imgMask"><img src="/assets/images/lg_{{imgFile}}" alt="" /></div></td>
            <td data-artistid="{{actID}}">{{actName}}</td>
            <td><button class="editArtistButton">edit</button></td>
            <td><button class="deleteArtistButton">delete</button></td>
        </tr>
        {{/artists}}
        {{^artists}}
        <tr>
            <td colspan="5" class="emptyTable">No artists yet <a href="#audioUpload" class="link">Upload one now</a> </td>
        </tr>
        {{/artists}}
        </tbody>
    </table>
</script>

<script type="text/template" id="template_artistAddOrEditPanel">
    <form id="artistInfo">

        {{#id}}
            <input type="hidden" id="actID" name="id" value="{{id}}" />
        {{/id}}
        <p>
            <label for="actName">Artist</label>
            <input type="text" name="actName" id="actName" maxlength="50" value="{{{actName}}}" required />
        </p>
        <p>
            <label for="actTown">Town</label>
            <input type="text" name="actTown" id="actTown" maxlength="50" value="{{{actTown}}}" />
        </p>
        <p>
            <label for="actCountry">Country</label>
            <input type="text" name="actCountry" id="actCountry" maxlength="50" value="{{{actCountry}}}" />
        </p>
        <p>
            <label for="website">Website</label>
            <input type="text" name="website" id="website" maxlength="254" value="{{{website}}}" />
        </p>
        <p>
            <label for="tags">Tags</label>
            <input type="text" name="tags" id="tags" maxlength="254" value="{{{tags}}}" />
        </p>
        <p>
            <label for="biog">Biog</label>
            <textarea name="biog" id="biog" cols="30" rows="10" >{{{biog}}}</textarea>
        </p>
        <p class="buttons">
            <button id="cancelEditButton">Cancel</button>
            <button id="addOrUpdateArtist">
                {{#id}}Update{{/id}}
                {{^id}}Add{{/id}}
            </button>
        </p>
    </form>
</script>

<script type="text/template" id="template_playlists">
    this is the playlists template
</script>

<script type="text/template" id="template_tags">
    this is the tags template
</script>